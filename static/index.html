<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>OVHcloud Price list | All Official OVH Prices</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet"/>
<link href="https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-1.13.5/b-2.4.1/b-html5-2.4.1/fh-3.4.0/datatables.min.css" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-1.13.5/b-2.4.1/b-html5-2.4.1/fh-3.4.0/datatables.min.js"></script>
<style type="text/css">
    body {
        margin: 0 0;
        --bs-body-color: #e8e6e3 !important;
        color: #e8e6e3;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
        font-size: 0.75em;
        height: 100%;
        overflow: hidden;
        
    }
    input.form-control, .form-control::placeholder, input.form-control, .form-control:focus {
        color: #e8e6e3;
        background-color: transparent;
    }

    a{ text-decoration: none;}
    article {
        padding: 5px 15px;
        /* background: rgb(36, 39, 40); */
        background: linear-gradient(to right bottom,rgba(5, 0, 38, 0.74), rgba(2, 11, 89, 0.36)), url("2019_FR_IMAGE_0910.jpg");
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
    }

    /* Custom datatable updates */
    thead {
        position: sticky;
        z-index: 12;
        top: -1px;
    }
    thead.stuck {
        background-color: rgb(33, 37, 41);
    }
    .table {
        --bs-table-bg: transparent !important;
    }
    th.sorting::before, th.sorting::after {opacity: 0.4 !important}
    table.dataTable thead > tr > th.sorting_asc::before, table.dataTable thead > tr > th.sorting_desc::after, table.dataTable thead > tr > td.sorting_asc::before, table.dataTable thead > tr > td.sorting_desc::after {opacity: 0.7!important}
    th.sorting, tr.filters > th {white-space: break-spaces !important;}
    .dt-buttons {margin-bottom: -47px;}
</style>
</head>
<body data-bs-theme="dark" class="fh-fixedHeader">
    <nav style="display: flex; align-items: center; height: 48px; padding: 0 15px;">
        <svg width="79" height="41" viewBox="0 0 79 48" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M73.14 2.69C76.9967 9.6413 78.7003 17.5821 78.0344 25.5036C77.3685 33.4252 74.3631 40.9701 69.4 47.18H47.96L54.56 35.51H45.83L56.12 17.38H64.9L73.14 2.71V2.69ZM30.8 47.18H8.94001C3.88432 40.9972 0.816836 33.4299 0.140434 25.4719C-0.535968 17.5139 1.21034 9.53738 5.15001 2.59L19.33 27.22L34.96 0H57.96L30.81 47.16L30.8 47.18Z"/>
        </svg>
        &nbsp;&nbsp;&nbsp;&nbsp;
        <h2 style="margin: 0">OVHcloud Price list - Baremetal servers</h2>
    </nav>
    <article class="container-fluid" style="overflow-y: scroll; height: calc(100vh - 48px); padding-top: 5px;">
        <div style="display: flex; justify-content: space-between; flex-wrap: wrap;">
            <div class="text" id="sub-list"></div>
            <div id="cache-time" class=""></div> 
        </div>
        <br>

        <table id="sd" class="table nowrap table-hover" style="display: none; width: 100%;">
            <thead id="sd-thead" class="thead-dark"></thead>
            <tbody></tbody>
        </table>
    </article>

<!-- Baremetal -->
<script type="text/javascript">
var DOWNLOAD_SVG = `<svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path opacity="0.5" d="M3 15C3 17.8284 3 19.2426 3.87868 20.1213C4.75736 21 6.17157 21 9 21H15C17.8284 21 19.2426 21 20.1213 20.1213C21 19.2426 21 17.8284 21 15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M12 3V16M12 16L16 11.625M12 16L8 11.625" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`;
var SUBSIDIARIES = ['CZ','DE','ES','FI','FR','GB','IE','IT','LT','MA','NL','PL','PT','SN','TN','US'];
var sub = new URLSearchParams(location.search).get('sub') || 'FR';
document.getElementById('sub-list').innerHTML = SUBSIDIARIES.reduce((acc, s, idx) => acc + `${idx != 0 ? '/' :''} <a href="${location.pathname}?sub=${s}">${s == sub ? '<b>'+s+'</b>' : s}</a> `, '');
var cache_bust = new Date().toDateString().replaceAll(' ','');

function stickyAction(){

}

var url = `https://share.s3.gra.io.cloud.ovh.net/baremetal_prices/${sub.toLowerCase()}.json?cache_bust=${cache_bust}`
fetch(url).then(res => res.json()).then(res => {
    document.getElementById('cache-time').innerText = 'Last updated: ' + new Date(res.date).toString();

    // Set header
    document.querySelector('#sd > thead').innerHTML =`<tr>
        <th>Range</th>
        <th>Name</th>
        <th>CPU model</th>
        <th>CPU cores</th>
        <th>CPU threads</th>
        <th>CPU speed (GHz)</th>
        <th>CPU score</th>
        <th>RAM summary</th>
        <th>RAM (GB)</th>
        <th>RAM clock speed (GHz)</th>
        <th>RAM type</th>
        <th>Storage summary</th>
        <th>Storage RAID type</th>
        <th>Storage (TB)</th>
        <th>Disk #1 amount</th>
        <th>Disk #1 capacity</th>
        <th>Disk #1 techno</th>
        <th>Storage price per TB (${res.currency})</th>
        <th>Monthly price (${res.currency})</th>
    </tr>`;

    // Set content
    document.querySelector('#sd > tbody').innerHTML = res.plans.reduce((acc, item) => {
        var storage_amount = item['storageSpecs']['specifications']['disks'][0]['number'] * item['storageSpecs']['specifications']['disks'][0]['capacity'];
        
        // If second disk exist, we sum the amount of GB.
        if (item['storageSpecs']['specifications']['disks'].length > 1 && item['storageSpecs']['specifications']['disks'][1]['number'] != '') {
            storage_amount += item['storageSpecs']['specifications']['disks'][1]['number'] * item['storageSpecs']['specifications']['disks'][1]['capacity'];
        }
        storage_amount = Math.round(storage_amount / 1000)
        
        var url = `https://www.ovhcloud.com/en-ie/bare-metal/${item['range']}/${item['invoiceName'].toLowerCase()}/`;
        if (item['range'].toLowerCase() == 'kimsufi' || item['range'] == 'soyoustart') {
            url = `https://eco.ovhcloud.com/`;
        }
        
        if (item['invoiceName'].split('-').length > 3) {
            return acc;
        }

        return acc + `<tr>
        <td>${item['range'].toUpperCase()} </td>
        <td><a href="${url}" target="_blank">${item['invoiceName']} </a></td>
        <td>${item['cpu']['brand']} ${item['cpu']['model']}</td>
        <td>${item['cpu']['cores']}</td>
        <td>${item['cpu']['threads']}</td>
        <td>${item['cpu']['frequency']}</td>
        <td>${item['cpu']['score']}</td>
        <td>${item['memory']['invoiceName']}</td>
        <td>${item['memory']['specifications']['size']}</td>
        <td>${item['memory']['specifications']['frequency']}</td>
        <td>${item['memory']['specifications']['ramType']}</td>
        <td>${item['storageSpecs']['invoiceName']}</td>
        <td>${item['storageSpecs']['specifications']['raid']}</td>
        <td>${storage_amount}</td>
        <td>${item['storageSpecs']['specifications']['disks'][0]['number']}</td>
        <td>${item['storageSpecs']['specifications']['disks'][0]['capacity']}</td>
        <td>${item['storageSpecs']['specifications']['disks'][0]['technology']}</td>
        <td>${(item['price'] / storage_amount).toFixed(2)}</td>
        <td>${item['price'].toFixed(2)}</td>
    </tr>`;
    }, '');

    var INVISIBLE_COLUMNS = [0,6,7,9,10,11];

    $(document).ready(function() {
        $('#sd thead tr')
        .clone(true)
        .addClass('filters')
        .appendTo('#sd thead');

    var mytable = $('#sd').DataTable( {
        fixedHeader: true,
        initComplete: function () {
            var api = this.api();
            
            // Set sticky action
            const el = document.getElementById("sd-thead");
            console.log(el);
            const observer = new IntersectionObserver( 
                ([e]) => {
                    console.log(e)
                    e.target.classList.toggle("stuck", e.intersectionRatio < 1)
                },
                {threshold: [1] }
            );
            observer.observe(el);

            $('#sd').show();

            api.columns().eq(0).each(function (colIdx) {
                if (INVISIBLE_COLUMNS.indexOf(colIdx) != -1) {
                    return;
                }

                // Set the header cell to contain the input element
                var cell = $('.filters th').eq($(api.column(colIdx).header()).index());
                var title = $(cell).text();
                var width = $(cell).width() - 15;
                $(cell).html(`<input class="form-control form-control-sm" type="text" placeholder="${title}" style="max-width: ${width}px; font-size: 0.75rem;"/><div style="height: 0px"></div>`);

                // On every keypress in this input
                $('input', $('.filters th').eq($(api.column(colIdx).header()).index()))
                    .off('keyup change')
                    .on('change', function (e) {
                        // Get the search value
                        $(this).attr('title', $(this).val());
                        var regexr = '({search})'; //$(this).parents('th').find('select').val();

                        var cursorPosition = this.selectionStart;
                        // Search the column for that value
                        api.column(colIdx)
                            .search(
                                this.value != '' ? regexr.replace('{search}', '(((' + this.value + ')))') : '',
                                this.value != '',
                                this.value == ''
                            )
                            .draw();
                    })
                    .on('keyup', function (e) {
                        e.stopPropagation();

                        $(this).trigger('change');
                        $(this)
                            .focus()[0]
                            .setSelectionRange(cursorPosition, cursorPosition);
                    });
                })
            },
        
        header: true,
        ordering: true,
        orderCellsTop: true,
        order: [[ 18, "asc" ]],
        paging: false,
        dom: 'Bfrtip',
        columnDefs: [{ "targets": INVISIBLE_COLUMNS, "visible": false }, {'targets': [17, 18], 'type': 'num'}],
        buttons: [
            { extend: 'excel', attr: {class: 'btn btn-outline-light btn-sm buttons-csv buttons-html5'}, text: `${DOWNLOAD_SVG} Export to Excel`, exportOptions: { modifier: { page: 'current' }, action: () => api.e } },
            { extend: 'csv', attr: {class: 'btn btn-outline-light btn-sm buttons-csv buttons-html5'}, text: `${DOWNLOAD_SVG} Export to CSV`, exportOptions: { modifier: { page: 'current' } } }
        ]
    } );
    
    } );
})

</script>

</div>
</body>
</html>
